{% extends 'main/base.html' %}
{% load static %}

{% block title %}Home{% endblock %}

{% block content %}
 <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
 
<style>
  .product-card {
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    border: 1px solid #ddd;
    border-radius: 10px;
  }
  .product-card:hover {
    transform: scale(1.03);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
  }
  .product-image {
    max-height: 250px;
    object-fit: contain;
  }
  .filter-box {
    min-width: 200px;
    max-height: 300px;
    overflow-y: auto;
    border: 1px solid #ccc;
    border-radius: 8px;
    padding: 10px;
  }
</style>

<div class="container my-5">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h4 class="fw-bold">Home › Products › Pamper’s</h4>
    <select class="form-select w-auto" id="priceFilter">
      <option value="all">Filter</option>
      <option value="100-500">Price (100–500)</option>
      <option value="501-800">Price (501–800)</option>
      <option value="801-1500">Price (801–1500)</option>
    </select>
  </div>

  <div class="row g-4" id="product-container">
    <div class="col-md-4 product-item" data-price="680">
      <div class="product-card p-3 text-center bg-light position-relative">
        <span class="badge bg-info position-absolute top-0 start-0 m-2 fs-5">New</span>
        <img src="{% static 'main/v1.png' %}" class="img-fluid product-image mb-3" alt="Diaper Pants">
        <h4 class="fw-bold">Twin Baby</h4>
        <div class="text-warning mb-2 fs-5">★★★★★</div>
        <h5><s class="text-muted">MRP ₹5000.00</s> <strong>Price ₹4399.00</strong></h5>
        <button class="btn btn-info text-white buy-btn" 
  data-name="Twin Baby" 
  data-price="4399" 
  data-image="{% static 'main/v1.png' %}">
  Buy
</button>

      </div>
    </div>

    <div class="col-md-4 product-item" data-price="450">
      <div class="product-card p-3 text-center bg-light position-relative">
        <span class="badge bg-info position-absolute top-0 start-0 m-2 fs-5">New</span>
        <img src="{% static 'main/v2.png' %}" class="img-fluid product-image mb-3" alt="Super Cute's">
        <h4 class="fw-bold">Baby Rocker</h4>
        <div class="text-warning mb-2">★★★★☆</div>
        <h5><s class="text-muted">MRP ₹10063.00</s> <strong>Price ₹8399.00</strong></h5>
        <button class="btn btn-info text-white buy-btn" 
  data-name="Baby Rocker" 
  data-price="8399" 
  data-image="{% static 'main/v2.png' %}">
  Buy
</button>
      </div>
    </div>

    <div class="col-md-4 product-item" data-price="700">
      <div class="product-card p-3 text-center bg-light position-relative">
        <span class="badge bg-info position-absolute top-0 start-0 m-2 fs-5">New</span>
        <img src="{% static 'main/v3.png' %}" class="img-fluid product-image mb-3" alt="Mee Premium">
        <h4 class="fw-bold">Lavern</h4>
        <div class="text-warning mb-2">★★★★★</div>
        <h5><s class="text-muted">MRP ₹10446.00</s> <strong>Price ₹9399.00</strong></h5>
        <button class="btn btn-info text-white buy-btn" 
  data-name="Lavern" 
  data-price="9399" 
  data-image="{% static 'main/v3.png' %}">
  Buy
</button>
      </div>
    </div>


      <div class="col-md-4 product-item" data-price="700">
      <div class="product-card p-3 text-center bg-light position-relative">
        <span class="badge bg-info position-absolute top-0 start-0 m-2 fs-5">New</span>
        <img src="{% static 'main/v4.png' %}" class="img-fluid product-image mb-3" alt="Mee Premium">
        <h4 class="fw-bold">Rock Roll</h4>
        <div class="text-warning mb-2">★★★★★</div>
        <h5><s class="text-muted">MRP ₹4860.00</s> <strong>Price ₹3399.00</strong></h5>
        <button class="btn btn-info text-white buy-btn" 
  data-name="Rock Roll" 
  data-price="3399" 
  data-image="{% static 'main/v4.png' %}">
  Buy
</button>
      </div>
    </div>

      <div class="col-md-4 product-item" data-price="700">
      <div class="product-card p-3 text-center bg-light position-relative">
        <span class="badge bg-info position-absolute top-0 start-0 m-2 fs-5">New</span>
        <img src="{% static 'main/v5.png' %}" class="img-fluid product-image mb-3" alt="Mee Premium">
        <h4 class="fw-bold">Kinger</h4>
        <div class="text-warning mb-2">★★★★★</div>
        <h5><s class="text-muted">MRP ₹7000.00</s> <strong>Price ₹6000.00</strong></h5>
        <button class="btn btn-info text-white buy-btn" 
  data-name="Kinger" 
  data-price="6000" 
  data-image="{% static 'main/v5.png' %}">
  Buy
</button>
      </div>
    </div>

      <div class="col-md-4 product-item" data-price="700">
      <div class="product-card p-3 text-center bg-light position-relative">
        <span class="badge bg-info position-absolute top-0 start-0 m-2 fs-5">New</span>
        <img src="{% static 'main/v6.png' %}" class="img-fluid product-image mb-3" alt="Mee Premium">
        <h4 class="fw-bold">Dravo</h4>
        <div class="text-warning mb-2">★★★★★</div>
        <h5><s class="text-muted">MRP ₹5850.00</s> <strong>Price ₹4399.00</strong></h5>
        <button class="btn btn-info text-white buy-btn" 
  data-name="Dravo" 
  data-price="4399" 
  data-image="{% static 'main/v6.png' %}">
  Buy
</button>
      </div>
    </div>

  </div>
</div>

<!-- Bootstrap Bundle -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<!-- Filter Logic -->

<script>
  const filter = document.getElementById("priceFilter");
 const cards = document.querySelectorAll(".product-item");

  filter.addEventListener("change", function () {
    const val = filter.value;

    cards.forEach(card => {
      const price = parseInt(card.getAttribute("data-price"));

      if (val === "all") {
        card.style.display = "block";
      } else {
        const [min, max] = val.split('-').map(Number);
        if (price >= min && price <= max) {
          card.style.display = "block";
        } else {
          card.style.display = "none";
        }
      }
    });
  });
</script>
<script>
    document.querySelectorAll('.buy-btn').forEach(btn => {
  btn.addEventListener('click', function () {
    const name = this.dataset.name;
    const price = parseFloat(this.dataset.price);
    const image = this.dataset.image;

    let cart = JSON.parse(localStorage.getItem('cart')) || [];

    const existing = cart.find(item => item.name === name);
    if (existing) {
      existing.quantity += 1;
    } else {
      cart.push({ name, price, image, quantity: 1 });
    }

    localStorage.setItem('cart', JSON.stringify(cart));
    alert(`${name} added to cart!`);
    updateCartCount();
  });
});

</script>
{% endblock %}
